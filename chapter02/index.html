<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>chapter 02 | Effective Java Study</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="">
    <link rel="preload" href="/effective-java-study/assets/css/0.styles.612e3498.css" as="style"><link rel="preload" href="/effective-java-study/assets/js/app.34abd0d4.js" as="script"><link rel="preload" href="/effective-java-study/assets/js/2.28ccdcca.js" as="script"><link rel="preload" href="/effective-java-study/assets/js/6.a084c838.js" as="script"><link rel="prefetch" href="/effective-java-study/assets/js/10.1e0a4467.js"><link rel="prefetch" href="/effective-java-study/assets/js/11.d58abc29.js"><link rel="prefetch" href="/effective-java-study/assets/js/12.7f3dee67.js"><link rel="prefetch" href="/effective-java-study/assets/js/13.f5726a00.js"><link rel="prefetch" href="/effective-java-study/assets/js/14.bdf148c5.js"><link rel="prefetch" href="/effective-java-study/assets/js/3.804d668d.js"><link rel="prefetch" href="/effective-java-study/assets/js/4.7d5f245c.js"><link rel="prefetch" href="/effective-java-study/assets/js/5.40f81d9d.js"><link rel="prefetch" href="/effective-java-study/assets/js/7.3c66e73f.js"><link rel="prefetch" href="/effective-java-study/assets/js/8.443cd7ba.js"><link rel="prefetch" href="/effective-java-study/assets/js/9.f3d8b2ea.js">
    <link rel="stylesheet" href="/effective-java-study/assets/css/0.styles.612e3498.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/effective-java-study/" class="home-link router-link-active"><!----> <span class="site-name">Effective Java Study</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/effective-java-study/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/effective-java-study/sample.html" class="nav-link">
  Sample
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/effective-java-study/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/effective-java-study/sample.html" class="nav-link">
  Sample
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>chapter 02</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/effective-java-study/chapter02/#chapter-02" class="sidebar-link">chapter 02</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/effective-java-study/chapter02/#_1-생성자-대신-정적-팩터리-메서드를-고려하라" class="sidebar-link">1. 생성자 대신 정적 팩터리 메서드를 고려하라</a></li><li class="sidebar-sub-header"><a href="/effective-java-study/chapter02/#_2-생성자에-매게변수가-많다면-빌더를-고려하라" class="sidebar-link">2. 생성자에 매게변수가 많다면 빌더를 고려하라</a></li><li class="sidebar-sub-header"><a href="/effective-java-study/chapter02/#_3-private-생성자나-열거-타입으로-싱글턴임을-보장하라" class="sidebar-link">3. private 생성자나 열거 타입으로 싱글턴임을 보장하라</a></li><li class="sidebar-sub-header"><a href="/effective-java-study/chapter02/#_4-인스턴스화를-막으려거든-private-생성자를-사용하라" class="sidebar-link">4. 인스턴스화를 막으려거든 private 생성자를 사용하라</a></li><li class="sidebar-sub-header"><a href="/effective-java-study/chapter02/#_5-자원을-직접-명시하지-말고-의존-객체-주입을-사용하라" class="sidebar-link">5. 자원을 직접 명시하지 말고 의존 객체 주입을 사용하라.</a></li><li class="sidebar-sub-header"><a href="/effective-java-study/chapter02/#_6-불필요한-객체-생성을-피하라" class="sidebar-link">6. 불필요한 객체 생성을 피하라</a></li><li class="sidebar-sub-header"><a href="/effective-java-study/chapter02/#_7-다-쓴-객체-참조를-해제하라" class="sidebar-link">7. 다 쓴 객체 참조를 해제하라</a></li><li class="sidebar-sub-header"><a href="/effective-java-study/chapter02/#_8-finalizer-cleaner-사용을-피하라" class="sidebar-link">8. finalizer / cleaner 사용을 피하라</a></li><li class="sidebar-sub-header"><a href="/effective-java-study/chapter02/#_9-try-finally보다는-try-with-resource를-사용하라" class="sidebar-link">9. try-finally보다는 try-with-resource를 사용하라</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="chapter-02"><a href="#chapter-02" class="header-anchor">#</a> chapter 02</h2> <h3 id="_1-생성자-대신-정적-팩터리-메서드를-고려하라"><a href="#_1-생성자-대신-정적-팩터리-메서드를-고려하라" class="header-anchor">#</a> 1. 생성자 대신 정적 팩터리 메서드를 고려하라</h3> <ul><li>장점
<ul><li>이름을 가질 수 있다.
<ul><li>반환될 객체의 특성 설명 (BigInter(int, int, Random) vs. BigInter.probablePrime)</li></ul></li> <li>호출될 때마다 인스턴스를 새로 생성하지는 않아도 된다.</li> <li>반환 타입의 하위 타입 객체를 반환할 수 있는 능력이 있다.</li> <li>입력 매개변수에 따라 매번 다른 클래스의 객체를 반환할 수 있다.</li> <li>EnumSet 클래스 : OpenJDK의 경우 원소가 64개 이하이면 RegularEnumSet, 65개 이상이면 JumboEnumSet을 반환하지만 클라이언트는 RegularEnumSet과 JumboEnumSet의 존재를 모름 (EnumSet의 하위 클래스이기만 하면 됨)</li> <li>정적 팩터리 메서드를 작성하는 시점에는 반환할 객체의 클래스가 존재하지 않아도 됨
<ul><li>이러한 유연함을 통해 서비스 제공자 프레임워크를 만드는 근간 (ex.JDBC)
<ul><li>서비스 제공자 프레임워크 : 3개의 핵심 컴포넌트 (서비스 인터페이스, 제공자 등록 API, 서비스 접근 API)</li></ul></li></ul></li></ul></li> <li>단점
<ul><li>상속을 하려면 public, protected 생성자가 필요하므로 정적 팩터리 메서드만 제공하면 하위 클래스를 만들 수 없음
<ul><li>상속보다 컴포지션을 사용하도록 유도하니 어쩌면 장점이 될 수도?</li></ul></li> <li>프로그래머가 찾기 어려움
<ul><li>API 문서를 잘 쓰고, 메서드 이름도 널리 알려진 규약을 잘 따라야 함</li> <li>정적 팩터리 메서드에 흔히 사용하는 명명 방식들
<ul><li>from, of, valueOf, instance / getInstance, create / newInstance, getType, newType, type</li></ul></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Date</span> d <span class="token operator">=</span> <span class="token class-name">Date</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>instant<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">BigInter</span> prime <span class="token operator">=</span> <span class="token class-name">BigInter</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span>MAX_VALUE<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Object</span> newArray <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span>classObject<span class="token punctuation">,</span> arrayLen<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li></ul> <h3 id="_2-생성자에-매게변수가-많다면-빌더를-고려하라"><a href="#_2-생성자에-매게변수가-많다면-빌더를-고려하라" class="header-anchor">#</a> 2. 생성자에 매게변수가 많다면 빌더를 고려하라</h3> <ul><li><p>기존 패턴들</p> <ul><li>점층적 생성자 패턴 (갯수가 많아지면 헷갈림)</li> <li>자바빈즈 패턴 (일단 만들고 set, set...)
<ul><li>객체가 완전히 생성되기 전까지는 일관성이 무너짐)</li> <li>클래스를 불변으로 만들 수 없으며 스레드 안전성을 얻으려면 추가 작업이 필요</li></ul></li></ul></li> <li><p>빌더 패턴</p> <ul><li>필수 매개변수만으로 생성자/정적 패터리를 호출해 빌더 객체를 얻음</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NutritionFacts</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> servingSize<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> servings<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> calories<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> fat<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> sodium<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> carbohydrate<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>
      <span class="token comment">// Required parameters</span>
      <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> servingSize<span class="token punctuation">;</span>
      <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> servings<span class="token punctuation">;</span>

      <span class="token comment">// Optional parameters - initialized to default values</span>
      <span class="token keyword">private</span> <span class="token keyword">int</span> calories      <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token keyword">private</span> <span class="token keyword">int</span> fat           <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token keyword">private</span> <span class="token keyword">int</span> sodium        <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token keyword">private</span> <span class="token keyword">int</span> carbohydrate  <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

      <span class="token keyword">public</span> <span class="token class-name">Builder</span><span class="token punctuation">(</span><span class="token keyword">int</span> servingSize<span class="token punctuation">,</span> <span class="token keyword">int</span> servings<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>servingSize <span class="token operator">=</span> servingSize<span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>servings    <span class="token operator">=</span> servings<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">calories</span><span class="token punctuation">(</span><span class="token keyword">int</span> val<span class="token punctuation">)</span>
      <span class="token punctuation">{</span> calories <span class="token operator">=</span> val<span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
      <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">fat</span><span class="token punctuation">(</span><span class="token keyword">int</span> val<span class="token punctuation">)</span>
      <span class="token punctuation">{</span> fat <span class="token operator">=</span> val<span class="token punctuation">;</span>           <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
      <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">sodium</span><span class="token punctuation">(</span><span class="token keyword">int</span> val<span class="token punctuation">)</span>
      <span class="token punctuation">{</span> sodium <span class="token operator">=</span> val<span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
      <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">carbohydrate</span><span class="token punctuation">(</span><span class="token keyword">int</span> val<span class="token punctuation">)</span>
      <span class="token punctuation">{</span> carbohydrate <span class="token operator">=</span> val<span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

      <span class="token keyword">public</span> <span class="token class-name">NutritionFacts</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">NutritionFacts</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token class-name">NutritionFacts</span><span class="token punctuation">(</span><span class="token class-name">Builder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      servingSize  <span class="token operator">=</span> builder<span class="token punctuation">.</span>servingSize<span class="token punctuation">;</span>
      servings     <span class="token operator">=</span> builder<span class="token punctuation">.</span>servings<span class="token punctuation">;</span>
      calories     <span class="token operator">=</span> builder<span class="token punctuation">.</span>calories<span class="token punctuation">;</span>
      fat          <span class="token operator">=</span> builder<span class="token punctuation">.</span>fat<span class="token punctuation">;</span>
      sodium       <span class="token operator">=</span> builder<span class="token punctuation">.</span>sodium<span class="token punctuation">;</span>
      carbohydrate <span class="token operator">=</span> builder<span class="token punctuation">.</span>carbohydrate<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">NutritionFacts</span> cocaCola <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NutritionFacts</span><span class="token punctuation">.</span><span class="token class-name">Builder</span><span class="token punctuation">(</span><span class="token number">240</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">calories</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sodium</span><span class="token punctuation">(</span><span class="token number">35</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">carbohydrate</span><span class="token punctuation">(</span><span class="token number">27</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>빌더 패턴은 계층적으로 설계된 클래스와 함께 쓰기에 좋다</li> <li>특히 매개변수가 많다면... 반드시!</li></ul></li> <li><p>Lombok이 만들어 준 빌더만 사용해왔는데, 필수 매개변수를 따로 코드에 녹여서 이렇게 쓸 수도 있겠구나</p></li></ul> <h3 id="_3-private-생성자나-열거-타입으로-싱글턴임을-보장하라"><a href="#_3-private-생성자나-열거-타입으로-싱글턴임을-보장하라" class="header-anchor">#</a> 3. private 생성자나 열거 타입으로 싱글턴임을 보장하라</h3> <p>3가지 방식으로 가능하다.</p> <ul><li><ol><li>public static final 변수</li></ol></li> <li><ol start="2"><li>정적 팩터리 메서드를 public static 멤버로 제공</li></ol></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Elvis</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Elvis</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> INSTANCE<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language- extra-class"><pre><code>-   이 방식들로 만든 싱글턴 클래스를 직렬화하려면 Serializable을 구현한다고 선언하는 것 뿐 아니라, 모든 인스턴스 필드를 일시적(transient)이라고 선언하고 readResolve 메서드를 제공해야 한다 (?)
</code></pre></div><ul><li><ol start="3"><li>원소가 하나인 열거 타입 선언</li></ol> <ul><li>추가 노력 없이 직렬화할 수 있음. 대부분의 상황에서 가장 좋은 방법</li></ul></li></ul> <h3 id="_4-인스턴스화를-막으려거든-private-생성자를-사용하라"><a href="#_4-인스턴스화를-막으려거든-private-생성자를-사용하라" class="header-anchor">#</a> 4. 인스턴스화를 막으려거든 private 생성자를 사용하라</h3> <ul><li>컴파일러가 자동으로 기본 생성자를 만드는 것을 방지하기 위함</li> <li>private이든, public이든 생성자가 일단 있으면 자동 생성이 안 되니까</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">UtilityClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">AssertionError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>이렇게 일단 만들어놓고 혹시 액세스될때를 대비하여 오류를 던지도록 하자</li> <li>상속을 불가능하게 하는 효과도 있음</li></ul> <h3 id="_5-자원을-직접-명시하지-말고-의존-객체-주입을-사용하라"><a href="#_5-자원을-직접-명시하지-말고-의존-객체-주입을-사용하라" class="header-anchor">#</a> 5. 자원을 직접 명시하지 말고 의존 객체 주입을 사용하라.</h3> <ul><li>인스턴스를 생성할 때 생성자에 필요한 자원을 넘겨주는 방식</li> <li>맨날 하는 바로 그것</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpellChecker</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Lexicon</span> dictionary<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SpellChecker</span><span class="token punctuation">(</span><span class="token class-name">Lexicon</span> dictionary<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dictionary <span class="token operator">=</span> <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>dictionary<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><ul><li><p>변형 : 생성자에게 자원 팩터리를 넘겨주는 방식</p> <ul><li>Java 8의 Supplier<T> 인터페이스가 팩터리를 표현한 완벽한 예 (?)</T></li></ul></li> <li><p>클래스가 내부적으로 하나 이상의 자원에 의존하고, 그 자원이 클래스 동작에 영향을 줄 경우 : 싱글턴, 정적 유틸리티 클래스 X</p> <ul><li>필요한 자원을(또는 그 자원을 만들어 주는 팩터리를) 생성자에게(또는 정적 팩터리나 빌더에) 넘겨주자!</li></ul> <h3 id="_6-불필요한-객체-생성을-피하라"><a href="#_6-불필요한-객체-생성을-피하라" class="header-anchor">#</a> 6. 불필요한 객체 생성을 피하라</h3> <ul><li>new String 하지 마세요</li> <li>Boolean(String) 생성자보다는 Boolean.valueOf(String) 이 좋겠죠</li> <li>정규표현식용 Pattern 인스턴스는 생성 비용이 높다 -&gt; 주의</li> <li>오토박싱 주의 (의미상으로는 별다를 것 없지만, 성능상으로는 그렇지 않다)</li></ul> <h3 id="_7-다-쓴-객체-참조를-해제하라"><a href="#_7-다-쓴-객체-참조를-해제하라" class="header-anchor">#</a> 7. 다 쓴 객체 참조를 해제하라</h3> <ul><li>Java에서 메모리 관리에 더 이상 신경쓰지 않아도 되는 줄 알았지만 아니지롱.</li> <li>가비지 컬렉션 언어에서는 메모리 누수 찾기가 매우 까다롭다!
<ul><li>객체 참조 하나를 살려두면 가비지 컬렉터는 그 객체뿐 아니라 그 객체가 참조하는 모든 객체를 회수하지 못하기 때문</li></ul></li> <li>자기 메모리를 직접 관리하는 클래스를 사용한다면 반드시 해제해야 한다.
<ul><li>해당 참조를 다 썼을 때 null처리하면 됨.</li></ul></li> <li>캐시, listener/callback 또한 메모리 누수의 주범
<ul><li>WeakHashMap에 키로 저장하면 가비지 컬렉터가 즉시 수거해 감.</li></ul></li></ul></li></ul> <h3 id="_8-finalizer-cleaner-사용을-피하라"><a href="#_8-finalizer-cleaner-사용을-피하라" class="header-anchor">#</a> 8. finalizer / cleaner 사용을 피하라</h3> <h3 id="_9-try-finally보다는-try-with-resource를-사용하라"><a href="#_9-try-finally보다는-try-with-resource를-사용하라" class="header-anchor">#</a> 9. try-finally보다는 try-with-resource를 사용하라</h3> <ul><li>try-with-resource를 사용하려면 해당 자원이 AutoCloseable 인터페이스를 구현해야 함</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">copy</span><span class="token punctuation">(</span><span class="token class-name">String</span> src<span class="token punctuation">,</span> <span class="token class-name">String</span> dst<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOEXception</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">InputStream</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">OutputStream</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>dst<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span>BUFFER_SIZE<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> n<span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>n<span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>회수해야 하는 자원을 사용하고 있다면 이 구문을 사용해보자 (BufferedReader, ...)</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/effective-java-study/assets/js/app.34abd0d4.js" defer></script><script src="/effective-java-study/assets/js/2.28ccdcca.js" defer></script><script src="/effective-java-study/assets/js/6.a084c838.js" defer></script>
  </body>
</html>
