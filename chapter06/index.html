<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>chapter 06 | Effective Java Study</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="">
    <link rel="preload" href="/effective-java-study/assets/css/0.styles.612e3498.css" as="style"><link rel="preload" href="/effective-java-study/assets/js/app.34abd0d4.js" as="script"><link rel="preload" href="/effective-java-study/assets/js/2.28ccdcca.js" as="script"><link rel="preload" href="/effective-java-study/assets/js/10.1e0a4467.js" as="script"><link rel="prefetch" href="/effective-java-study/assets/js/11.d58abc29.js"><link rel="prefetch" href="/effective-java-study/assets/js/12.7f3dee67.js"><link rel="prefetch" href="/effective-java-study/assets/js/13.f5726a00.js"><link rel="prefetch" href="/effective-java-study/assets/js/14.bdf148c5.js"><link rel="prefetch" href="/effective-java-study/assets/js/3.804d668d.js"><link rel="prefetch" href="/effective-java-study/assets/js/4.7d5f245c.js"><link rel="prefetch" href="/effective-java-study/assets/js/5.40f81d9d.js"><link rel="prefetch" href="/effective-java-study/assets/js/6.a084c838.js"><link rel="prefetch" href="/effective-java-study/assets/js/7.3c66e73f.js"><link rel="prefetch" href="/effective-java-study/assets/js/8.443cd7ba.js"><link rel="prefetch" href="/effective-java-study/assets/js/9.f3d8b2ea.js">
    <link rel="stylesheet" href="/effective-java-study/assets/css/0.styles.612e3498.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/effective-java-study/" class="home-link router-link-active"><!----> <span class="site-name">Effective Java Study</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/effective-java-study/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/effective-java-study/sample.html" class="nav-link">
  Sample
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/effective-java-study/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/effective-java-study/sample.html" class="nav-link">
  Sample
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>chapter 06</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/effective-java-study/chapter06/#chapter-06" class="sidebar-link">chapter 06</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/effective-java-study/chapter06/#열거-타입과-애너테이션" class="sidebar-link">열거 타입과 애너테이션</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/effective-java-study/chapter06/#_34-int-상수-대신-열거-타입을-사용하라" class="sidebar-link">34. int 상수 대신 열거 타입을 사용하라</a></li><li class="sidebar-sub-header"><a href="/effective-java-study/chapter06/#_35-ordinal-메서드-대신-인스턴스-필드를-사용하라" class="sidebar-link">35. ordinal 메서드 대신 인스턴스 필드를 사용하라</a></li><li class="sidebar-sub-header"><a href="/effective-java-study/chapter06/#_36-비트-필드-대신-enumset을-사용하라" class="sidebar-link">36. 비트 필드 대신 EnumSet을 사용하라</a></li><li class="sidebar-sub-header"><a href="/effective-java-study/chapter06/#_37-ordinal-인덱싱-대신-enummap을-사용하라" class="sidebar-link">37. ordinal 인덱싱 대신 EnumMap을 사용하라</a></li><li class="sidebar-sub-header"><a href="/effective-java-study/chapter06/#_38-확장할-수-있는-열거-타입이-필요하면-인터페이스를-사용하라" class="sidebar-link">38. 확장할 수 있는 열거 타입이 필요하면 인터페이스를 사용하라</a></li><li class="sidebar-sub-header"><a href="/effective-java-study/chapter06/#_39-명명-패턴보다-애너테이션을-사용하라" class="sidebar-link">39. 명명 패턴보다 애너테이션을 사용하라</a></li><li class="sidebar-sub-header"><a href="/effective-java-study/chapter06/#_40-override-애너테이션을-일관되게-사용하라" class="sidebar-link">40. @Override 애너테이션을 일관되게 사용하라</a></li><li class="sidebar-sub-header"><a href="/effective-java-study/chapter06/#_41-정의하려는-것이-타입이라면-마커-인터페이스를-사용하라" class="sidebar-link">41. 정의하려는 것이 타입이라면 마커 인터페이스를 사용하라</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="chapter-06"><a href="#chapter-06" class="header-anchor">#</a> chapter 06</h2> <h2 id="열거-타입과-애너테이션"><a href="#열거-타입과-애너테이션" class="header-anchor">#</a> 열거 타입과 애너테이션</h2> <h3 id="_34-int-상수-대신-열거-타입을-사용하라"><a href="#_34-int-상수-대신-열거-타입을-사용하라" class="header-anchor">#</a> 34. int 상수 대신 열거 타입을 사용하라</h3> <ul><li>Enum이 없을 때에는 이런 슬픈 패턴을 썼다. Enum 짱짱</li> <li>가장 단순한 Enum</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Apple</span> <span class="token punctuation">{</span> FUJI<span class="token punctuation">,</span> PIPPIN<span class="token punctuation">,</span> GRANNY_SMITH <span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Orange</span> <span class="token punctuation">{</span> NAVEL<span class="token punctuation">,</span> TEMPLE<span class="token punctuation">,</span> BLOOD <span class="token punctuation">}</span>
</code></pre></div><ul><li><p>Enum 자체는 클래스이며, 상수 하나당 자신의 인스턴스를 하나씩 만들어 public static final 필드로 공개</p> <ul><li>밖에서 접근할 수 있는 생성자를 제공하지 않으므로 사실상 final</li> <li>클라이언트가 인스턴스를 직접 생성/확장할 수 없으니 인스턴스들은 딱 하나씩만 존재함 (singleton)</li> <li>Object 메서드들을 높은 품질로 구현해둠, Comparable과 Serializable도 구현</li></ul></li> <li><p>임의의 메서드나 필드를 추가할 수 있다.</p></li> <li><p>열거 타입은 근본적으로 불변 -&gt; 모든 필드는 final이어야 함</p></li> <li><p>널리 쓰이는 열거 타입은 톱레벨 클래스로 만들고, 특정 톱레벨 클래스에서만 쓰인다면 해당 클래스의 멤버 클래스로 만듬</p> <ul><li>마음의 저항감이 ... ㅠㅠ</li></ul></li> <li><p>열거 타입에서 상수별로 다르게 동작하는 코드를 구현하는 법</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Operation</span> <span class="token punctuation">{</span>
  PLUS <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  MINUS <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> x <span class="token operator">-</span> y<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  TIMES <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> x <span class="token operator">*</span> y<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  DIVIDE <span class="token punctuation">{</span><span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> x <span class="token operator">/</span> y<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>Enum에는 상수 <em>이름</em> 을 입력받아 그 이름에 해당하는 상수를 반환해주는 valueOf(String) 메서드가 자동 생성됨</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Operation</span> op1 <span class="token operator">=</span> <span class="token class-name">Operation</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token string">&quot;PLUS&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 위의 PLUS가 반환됨</span>
<span class="token class-name">Operation</span> op2 <span class="token operator">=</span> <span class="token class-name">Operation</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token string">&quot;MINUS&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 위의 MINUS가 반환*</span>
</code></pre></div><ul><li><p>Enum의 toString을 재정의하려면 toString이 반환하는 문자열을 해당 Enum으로 변환해주는 fromString 메서드도 함께 제공하는 것을 고려</p></li> <li><p>열거 타입을 언제 쓸까?</p> <ul><li>필요한 원소를 컴파일타임에 다 알 수 있는 상수 집합이라면 항상 열거 타입을 사용</li> <li>열거 타입에 정의된 상수 개수가 영원히 고정불변일 필요는 없음</li></ul></li></ul> <h3 id="_35-ordinal-메서드-대신-인스턴스-필드를-사용하라"><a href="#_35-ordinal-메서드-대신-인스턴스-필드를-사용하라" class="header-anchor">#</a> 35. ordinal 메서드 대신 인스턴스 필드를 사용하라</h3> <ul><li><p>이런 게 있는지 몰랐다 ...</p></li> <li><p>모든 Enum은 해당 상수가 그 Enum에서 몇 번째 위치인지를 반환하는 ordinal이라는 메소드를 사용</p></li> <li><p>이러시면 안됩니다</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Enum</span> <span class="token class-name">Ensemble</span> <span class="token punctuation">{</span>
  SOLO<span class="token punctuation">,</span> DUET<span class="token punctuation">,</span> TRIO<span class="token punctuation">,</span> QUARTET<span class="token punctuation">,</span> QUINTET<span class="token punctuation">,</span>
  SEXTET<span class="token punctuation">,</span> SEPTET<span class="token punctuation">,</span> OCTET<span class="token punctuation">,</span> NONET<span class="token punctuation">,</span> DECTET<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">numberOfMuisicians</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">ordinal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>그냥 인스턴스 필드에 저장하세요</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Enum</span> <span class="token class-name">Ensemble</span> <span class="token punctuation">{</span>
  <span class="token function">SOLO</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">DUET</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> numberOfMuisicians<span class="token punctuation">;</span>
</code></pre></div><ul><li>ordinal은 EnumSet과 EnumMap같이 Enum 기반 범용 자료구조에 쓸 목적으로 설계되었다고 한다</li></ul> <h3 id="_36-비트-필드-대신-enumset을-사용하라"><a href="#_36-비트-필드-대신-enumset을-사용하라" class="header-anchor">#</a> 36. 비트 필드 대신 EnumSet을 사용하라</h3> <ul><li>EnumSet이라는 자료구조도 있다.
<ul><li>Enum 상수의 값으로 구성된 집합을 효과적으로 표현</li></ul></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">EnumSet</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">Style</span><span class="token punctuation">.</span>BOLD<span class="token punctuation">,</span> <span class="token class-name">Style</span><span class="token punctuation">.</span>ITALIC<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//집합 생석을 위한 정적 팩터리</span>
</code></pre></div><ul><li>불변 EnumSet을 만들 수는 없지만 Collections.unmodifiableSet으로 감싸서 사용은 가능</li></ul> <h3 id="_37-ordinal-인덱싱-대신-enummap을-사용하라"><a href="#_37-ordinal-인덱싱-대신-enummap을-사용하라" class="header-anchor">#</a> 37. ordinal 인덱싱 대신 EnumMap을 사용하라</h3> <ul><li>EnumMap : Enum을 키로 사용하도록 설계한 아주 빠른 Map 구현체</li> <li>다차원 관계는 EnumMap&lt;..., EnumMap&lt;..&gt;&gt;으로 표현</li></ul> <h3 id="_38-확장할-수-있는-열거-타입이-필요하면-인터페이스를-사용하라"><a href="#_38-확장할-수-있는-열거-타입이-필요하면-인터페이스를-사용하라" class="header-anchor">#</a> 38. 확장할 수 있는 열거 타입이 필요하면 인터페이스를 사용하라</h3> <ul><li>대부분 상황에서 Enum을 확장하는 것은 좋지 않은 생각임</li> <li>하지만 필요할 때가 있다면...
<ul><li>기본 아이디어 : Enum이 임의의 인터페이스를 구현할 수 있음을 이용</li></ul></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Operation</span> <span class="token punctuation">{</span>
  <span class="token keyword">double</span> apply <span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">BasicOperation</span> <span class="token keyword">implements</span> <span class="token class-name">Operation</span> <span class="token punctuation">{</span>
  <span class="token function">PLUS</span><span class="token punctuation">(</span><span class="token string">&quot;+&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> x<span class="token operator">+</span>y<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">ExtendedOperation</span> <span class="token keyword">implements</span> <span class="token class-name">Operation</span> <span class="token punctuation">{</span>
  <span class="token function">EXP</span><span class="token punctuation">(</span><span class="token string">&quot;^&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_39-명명-패턴보다-애너테이션을-사용하라"><a href="#_39-명명-패턴보다-애너테이션을-사용하라" class="header-anchor">#</a> 39. 명명 패턴보다 애너테이션을 사용하라</h3> <ul><li><p>애너테이션이 나오기 전에는 naming pattern을 이용하였다</p> <ul><li>예시 : Junit 3은 테스트 메서드 이름을 &quot;test&quot;로 시작하게 하였다
<ul><li>단점 : 실수로 tset어쩌구로 이름을 지으면 그냥 무시해버리게 된다...</li></ul></li></ul></li> <li><p>Test라는 이름의 애너테이션 만들기</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span> <span class="token comment">// 이 애너태이션이 런타임에도 유지되어야 함</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>METHOD<span class="token punctuation">)</span>         <span class="token comment">// 요것은 메서드에 붙이는 애너테이션이다</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> test <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>Test가 달린 것만 실행하도록 해보자</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Sample</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Test</span> <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">m1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">m2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token annotation punctuation">@Test</span> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">m5</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RunTests</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> testClass <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Method</span> m <span class="token operator">:</span> testClass<span class="token punctuation">.</span><span class="token function">getDeclaredMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">isAnnotationPresent</span><span class="token punctuation">(</span><span class="token class-name">Test</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        m<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>특정 예외를 던져야만 성공하는 테스트를 위한 애너테이션</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span> <span class="token comment">// 이 애너태이션이 런타임에도 유지되어야 함</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>METHOD<span class="token punctuation">)</span>         <span class="token comment">// 요것은 메서드에 붙이는 애너테이션이다</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">ExceptionTest</span> <span class="token punctuation">{</span>
  <span class="token keyword">class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Throwable</span><span class="token punctuation">&gt;</span></span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Throwable을 확장한 클래스의 Class 객체!!</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Sample2</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@ExceptionTest</span><span class="token punctuation">(</span><span class="token class-name">ArithmeticException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">m1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token annotation punctuation">@ExceptionTest</span><span class="token punctuation">(</span><span class="token class-name">ArithmeticException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">m1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  

<span class="token punctuation">}</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token comment">// 사용 예시</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">isAnnotationPresent</span><span class="token punctuation">(</span><span class="token class-name">ExceptionTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InvocationTargetException</span> wrappedEx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Throwable</span> exc <span class="token operator">=</span> wrappedEx<span class="token punctuation">.</span><span class="token function">getCause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Throwable</span><span class="token punctuation">&gt;</span></span> excType <span class="token operator">=</span> m<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">ExceptionTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>excType<span class="token punctuation">.</span><span class="token function">isInstance</span><span class="token punctuation">(</span>exc<span class="token punctuation">)</span><span class="token punctuation">)</span> passed<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>배열 매개변수를 받는 애너테이션도 만들 수 있음</li> <li>반복 가능 애너테이션도 만들 수 있음 (컨테이너 애너테이션을 따로 써야 하므로 처리에 주의)</li></ul> <h3 id="_40-override-애너테이션을-일관되게-사용하라"><a href="#_40-override-애너테이션을-일관되게-사용하라" class="header-anchor">#</a> 40. @Override 애너테이션을 일관되게 사용하라</h3> <ul><li>애너테이션을 만들 일은 별로 없겠지만 요것은 코딩하면서 엄청나게 많이 마주칠 것이다</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bigram</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Bigram</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span> <span class="token comment">// 이게 아니다</span>

  <span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">//이거다!</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>예시 : equals를 재정의하려고 했지만 오버로딩해버렸다 (매개변수를 Object가 아닌 자기 자신으로 함)
<ul><li>@Override를 달고 컴파일하면 오류가 발생하여 바로 알아차릴 수 있다</li></ul></li> <li>상의 클래스의 메서드를 재정의하려는 모든 메서드에 @Override 를 달자</li></ul> <h3 id="_41-정의하려는-것이-타입이라면-마커-인터페이스를-사용하라"><a href="#_41-정의하려는-것이-타입이라면-마커-인터페이스를-사용하라" class="header-anchor">#</a> 41. 정의하려는 것이 타입이라면 마커 인터페이스를 사용하라</h3> <ul><li>아무 메서드도 담고 있지 않고, 단지 자신을 구현하는 클래스가 특정 속성을 가짐을 표현해주는 인터페이스
<ul><li>ex) Serializable</li></ul></li> <li>마커 인터페이스는 두 가지 면에서 마커 애너테이션보다 낫다
<ol><li>이를 구현한 클래스의 인스턴스들을 구분하는 타입으로 쓸 수 있음</li> <li>적용 대상을 더 정밀하게 지정할 수 있음</li></ol></li> <li>마커 애너테이션이 더 나은 점은?
<ul><li>거대한 애너테이션 시스템의 지원을 받음</li></ul></li> <li>그래서 어떻게 써야하나요?
<ul><li>이 마킹이 된 객체를 매개변수로 받는 메서드를 작성할 일이 있다면 -&gt; 마커 인터페이스를 써라</li></ul></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/effective-java-study/assets/js/app.34abd0d4.js" defer></script><script src="/effective-java-study/assets/js/2.28ccdcca.js" defer></script><script src="/effective-java-study/assets/js/10.1e0a4467.js" defer></script>
  </body>
</html>
