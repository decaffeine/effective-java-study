<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>chapter 04 클래스와 인터페이스 | Effective Java Study</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="">
    <link rel="preload" href="/effective-java-study/assets/css/0.styles.612e3498.css" as="style"><link rel="preload" href="/effective-java-study/assets/js/app.34abd0d4.js" as="script"><link rel="preload" href="/effective-java-study/assets/js/2.28ccdcca.js" as="script"><link rel="preload" href="/effective-java-study/assets/js/8.443cd7ba.js" as="script"><link rel="prefetch" href="/effective-java-study/assets/js/10.1e0a4467.js"><link rel="prefetch" href="/effective-java-study/assets/js/11.d58abc29.js"><link rel="prefetch" href="/effective-java-study/assets/js/12.7f3dee67.js"><link rel="prefetch" href="/effective-java-study/assets/js/13.f5726a00.js"><link rel="prefetch" href="/effective-java-study/assets/js/14.bdf148c5.js"><link rel="prefetch" href="/effective-java-study/assets/js/3.804d668d.js"><link rel="prefetch" href="/effective-java-study/assets/js/4.7d5f245c.js"><link rel="prefetch" href="/effective-java-study/assets/js/5.40f81d9d.js"><link rel="prefetch" href="/effective-java-study/assets/js/6.a084c838.js"><link rel="prefetch" href="/effective-java-study/assets/js/7.3c66e73f.js"><link rel="prefetch" href="/effective-java-study/assets/js/9.f3d8b2ea.js">
    <link rel="stylesheet" href="/effective-java-study/assets/css/0.styles.612e3498.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/effective-java-study/" class="home-link router-link-active"><!----> <span class="site-name">Effective Java Study</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/effective-java-study/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/effective-java-study/sample.html" class="nav-link">
  Sample
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/effective-java-study/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/effective-java-study/sample.html" class="nav-link">
  Sample
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>chapter 04 클래스와 인터페이스</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/effective-java-study/chapter04/#chapter-04-클래스와-인터페이스" class="sidebar-link">chapter 04 클래스와 인터페이스</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/effective-java-study/chapter04/#_15-클래스와-멤버의-접근-권한을-최소화하라" class="sidebar-link">15. 클래스와 멤버의 접근 권한을 최소화하라</a></li><li class="sidebar-sub-header"><a href="/effective-java-study/chapter04/#_16-public-클래스에서는-public-필드가-아닌-접근자-메서드를-사용하라" class="sidebar-link">16. public 클래스에서는 public 필드가 아닌 접근자 메서드를 사용하라</a></li><li class="sidebar-sub-header"><a href="/effective-java-study/chapter04/#_17-변경-가능성을-최소화하라" class="sidebar-link">17. 변경 가능성을 최소화하라</a></li><li class="sidebar-sub-header"><a href="/effective-java-study/chapter04/#_18-상속보다는-컴포지션을-사용하라" class="sidebar-link">18. 상속보다는 컴포지션을 사용하라 *</a></li><li class="sidebar-sub-header"><a href="/effective-java-study/chapter04/#_19-상속을-고려해-설계하고-문서화하라-그렇지-않았다면-상속을-금지하라" class="sidebar-link">19. 상속을 고려해 설계하고 문서화하라. 그렇지 않았다면 상속을 금지하라</a></li><li class="sidebar-sub-header"><a href="/effective-java-study/chapter04/#_20-추상-클래스보다는-인터페이스를-우선하라" class="sidebar-link">20. 추상 클래스보다는 인터페이스를 우선하라</a></li><li class="sidebar-sub-header"><a href="/effective-java-study/chapter04/#_21-인터페이스는-구현하는-쪽을-생각해-설계하라" class="sidebar-link">21. 인터페이스는 구현하는 쪽을 생각해 설계하라</a></li><li class="sidebar-sub-header"><a href="/effective-java-study/chapter04/#_22-인터페이스는-타입을-정의하는-용도로만-사용하라" class="sidebar-link">22. 인터페이스는 타입을 정의하는 용도로만 사용하라</a></li><li class="sidebar-sub-header"><a href="/effective-java-study/chapter04/#_23-태그-달린-클래스보다는-클래스-계층구조를-활용하라" class="sidebar-link">23. 태그 달린 클래스보다는 클래스 계층구조를 활용하라</a></li><li class="sidebar-sub-header"><a href="/effective-java-study/chapter04/#_24-멤버-클래스는-되도록-static으로-만들라" class="sidebar-link">24. 멤버 클래스는 되도록 static으로 만들라</a></li><li class="sidebar-sub-header"><a href="/effective-java-study/chapter04/#_25-톱레벨-클래스는-한-파일에-하나만-담으라" class="sidebar-link">25. 톱레벨 클래스는 한 파일에 하나만 담으라</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="chapter-04-클래스와-인터페이스"><a href="#chapter-04-클래스와-인터페이스" class="header-anchor">#</a> chapter 04 클래스와 인터페이스</h2> <p>클래스와 인터페이스 - 추상화의 기본 단위! 자바 언어의 심장!</p> <h3 id="_15-클래스와-멤버의-접근-권한을-최소화하라"><a href="#_15-클래스와-멤버의-접근-권한을-최소화하라" class="header-anchor">#</a> 15. 클래스와 멤버의 접근 권한을 최소화하라</h3> <ul><li><p>정보 은닉</p> <ul><li>잘 설계된 컴포넌트는 오직 API를 통해서만 다른 컴포넌트와 소통, 서로의 내부 동작 방식에는 전혀 개의치 않음</li> <li>접근 제한자(private, protected, public)를 제대로 활용하는 것이 정보 은닉의 핵심</li> <li>기본 원칙 : 모든 클래스와 멤버의 접근성을 가능한 한 좁혀야 함
<ul><li>소프트웨어가 제대로 동작하는 한 가장 낮은 접근성을 부여해야</li></ul></li></ul></li> <li><p>공개 API를 세심하게 설계한 후 모든 멤버는 private으로 만들고</p> <ul><li>같은 패키지의 다른 클래스가 접근해야 하는 멤버에 한하여 package-private으로 풀어 주기 (private 제한자 제거)</li> <li>권한을 풀어 주는 일을 자주 해야 한다면 컴포넌트를 더 분해해야 하는 것이 아닐까 고민하기</li></ul></li> <li><p>단지 코트를 테스트하려는 목적으로 접근 범위를 넓힐 때</p> <ul><li>package-private까지는 괜찮지만 public은 안 됨</li></ul></li> <li><p>public 클래스의 인스턴스 필드는 되도록 public이 아니어야 한다</p> <ul><li>public 가변 필드를 갖는 클래스는 일반적으로 thread-safe 하지 않다!!</li> <li>길이가 0이 아닌 배열은 모두 변경 가능하니 주의
<ul><li>클래스에서 public static final 배열 필드를 두거나 이 필드를 반환하는 접근자 메서드를 제공해서는 안 됨</li></ul></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 이건 안 돼</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Thing</span><span class="token punctuation">[</span><span class="token punctuation">]</span> VALUES <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 해결책 1</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Thing</span><span class="token punctuation">[</span><span class="token punctuation">]</span> PRIVATE_VALUES <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Thing</span><span class="token punctuation">&gt;</span></span> VALUES <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableList</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>PRIVATE_VALUES<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 해결책 2</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Thing</span><span class="token punctuation">[</span><span class="token punctuation">]</span> PRIVATE_VALUES <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Thing</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> PRIVATE_VALUES<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

</code></pre></div></li> <li><p>자바 9에서는 모듈 개념이 추가됨</p> <ul><li>패키지가 클래스의 묶음이듯, 모듈은 패키지의 묶음</li></ul></li></ul> <h3 id="_16-public-클래스에서는-public-필드가-아닌-접근자-메서드를-사용하라"><a href="#_16-public-클래스에서는-public-필드가-아닌-접근자-메서드를-사용하라" class="header-anchor">#</a> 16. public 클래스에서는 public 필드가 아닌 접근자 메서드를 사용하라</h3> <ul><li>패키지 바깥에서 접근할 수 있는 public 클래스라면 접근자(getter,setter)를 통해 인스턴스에 접근
<ul><li>public 클래스의 필드를 직접 노출하면 안 된다
<ul><li>불변이라면 조금 낫지만 완전히 안심하기는 어렵다</li></ul></li> <li>Java 플랫폼 라이브러리에도 이를 어긴 사례들이 있다 (java.awt.package의 Point, Dimension)</li></ul></li> <li>package-private 또는 private 중첩 클래스라면 데이터 필드를 노출해도 상관없다</li></ul> <h3 id="_17-변경-가능성을-최소화하라"><a href="#_17-변경-가능성을-최소화하라" class="header-anchor">#</a> 17. 변경 가능성을 최소화하라</h3> <ul><li>자바의 다양한 불변 클래스들
<ul><li>String, 기본 타입의 박싱된 클래스들, BigInteger, BigDecimal</li></ul></li> <li>클래스를 불변으로 만들려면 다음의 5가지 규칙을 따르면 된다
<ul><li>객체 상태를 변경하는 메서드(변경자) 제공 X</li> <li>클래스를 확장할 수 없도록 한다</li> <li>모든 필드를 final로 선언</li> <li>모든 필드를 private으로 선언</li> <li>자신 외에는 내부의 가변 컴포넌트에 접근할 수 없도록 한다</li></ul></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Complex</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">double</span> re<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">double</span> im<span class="token punctuation">;</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token keyword">public</span> <span class="token class-name">Complex</span> <span class="token function">plus</span><span class="token punctuation">(</span><span class="token class-name">Complex</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Complex</span><span class="token punctuation">(</span>re <span class="token operator">+</span> c<span class="token punctuation">.</span>re<span class="token punctuation">,</span> im <span class="token operator">+</span> c<span class="token punctuation">.</span>im<span class="token punctuation">)</span><span class="token punctuation">;</span>  
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><p>함수형 프로그래밍 패턴?</p> <ul><li>메서드 이름으로 (add 같은) 동사 대신 (plus 같은) 전치사를 사용??</li></ul></li> <li><p>불변 객체는 근본적으로 thread-safe</p></li> <li><p>불변 객체 원칙에서 자신을 상속하지 못하게 하기</p> <ul><li>final 클래스로 선언하거나</li> <li>모든 생성자를 private, package-private으로 만들고 public 정적 팩터리 제공하기</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Complex</span> <span class="token punctuation">{</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">private</span> <span class="token class-name">Complex</span><span class="token punctuation">(</span><span class="token keyword">double</span> re<span class="token punctuation">,</span> <span class="token keyword">double</span> im<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Complex</span> <span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token keyword">double</span> re<span class="token punctuation">,</span> <span class="token keyword">double</span> im<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Complex</span><span class="token punctuation">(</span>re<span class="token punctuation">,</span> im<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>생성자는 불변식 설정이 모두 완료된, 초기화가 완벽히 끝난 상태의 객체를 생성해야 함</p></li></ul> <h3 id="_18-상속보다는-컴포지션을-사용하라"><a href="#_18-상속보다는-컴포지션을-사용하라" class="header-anchor">#</a> 18. 상속보다는 컴포지션을 사용하라 ***</h3> <ul><li><p>메서드 호출과 달리 상속은 캡슐화를 깨뜨림</p> <ul><li>상위 클래스의 구현에 따라 하위 클래스의 동작에 이상이 생길 수 있다</li></ul></li> <li><p>잘못된 사용 예시 (결과로 3을 기대하지만 6이 나옴)</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InstrumentedHashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token comment">// The number of attempted element insertions</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> addCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">InstrumentedHashSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">InstrumentedHashSet</span><span class="token punctuation">(</span><span class="token keyword">int</span> initCap<span class="token punctuation">,</span> <span class="token keyword">float</span> loadFactor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>initCap<span class="token punctuation">,</span> loadFactor<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        addCount<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">addAll</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        addCount <span class="token operator">+=</span> c<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAddCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> addCount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">InstrumentedHashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InstrumentedHashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        s<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;Snap&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Crackle&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Pop&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">getAddCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><p>해결 방법</p> <ul><li>기존 클래스를 확장하는 대신, 새로운 클래스를 만들고 private 필드로 기존 클래스의 인스턴스를 참조</li> <li>기존 클래스가 새로운 클래스의 구성요소로 쓰인다는 뜻에서 COMPOSITION / 구성 이라 한다.</li> <li>새 클래스의 인스턴스 메소드들은 private 필드로 참조하는 기존 클래스의 대응하는 메소드를 호출해 그 결과를 반환 (Forwarding)</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InstrumentedSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">ForwardingSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">int</span> addCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">InstrumentedSet</span><span class="token punctuation">(</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">super</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      addCount<span class="token operator">++</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">addAll</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      addCount <span class="token operator">+=</span> c<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAddCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> addCount<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">InstrumentedSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InstrumentedSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      s<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;Snap&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Crackle&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Pop&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">getAddCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ForwardingSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> s<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name">ForwardingSet</span><span class="token punctuation">(</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>s <span class="token operator">=</span> s<span class="token punctuation">;</span> <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>               <span class="token punctuation">{</span> s<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">contains</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token punctuation">{</span> <span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                 <span class="token punctuation">{</span> <span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>     <span class="token punctuation">{</span> <span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span>           <span class="token punctuation">{</span> <span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span>   <span class="token punctuation">{</span> <span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">containsAll</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span>
                                 <span class="token punctuation">{</span> <span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">containsAll</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
                                 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

</code></pre></div></li> <li><p>상속은 명백히 하위 클래스가 is-a 관계일 때만 써야 한다</p></li> <li><p>자바 플랫폼 라이브러리에서도 이 원칙을 위반한 클래스들이 있음</p> <ul><li>스택은 벡터가 아님(Stack은 Vector를 확장해선 안 됐음)</li> <li>속성 목록도 해시테이블이 아님(Properties도 Hashtable을 확장해선 안 됐음)</li></ul></li></ul> <h3 id="_19-상속을-고려해-설계하고-문서화하라-그렇지-않았다면-상속을-금지하라"><a href="#_19-상속을-고려해-설계하고-문서화하라-그렇지-않았다면-상속을-금지하라" class="header-anchor">#</a> 19. 상속을 고려해 설계하고 문서화하라. 그렇지 않았다면 상속을 금지하라</h3> <ul><li>상속 금지 : 클래스를 final로 선언하거나 생성자 모두를 외부에서 접근할 수 없도록</li></ul> <h3 id="_20-추상-클래스보다는-인터페이스를-우선하라"><a href="#_20-추상-클래스보다는-인터페이스를-우선하라" class="header-anchor">#</a> 20. 추상 클래스보다는 인터페이스를 우선하라</h3> <h3 id="_21-인터페이스는-구현하는-쪽을-생각해-설계하라"><a href="#_21-인터페이스는-구현하는-쪽을-생각해-설계하라" class="header-anchor">#</a> 21. 인터페이스는 구현하는 쪽을 생각해 설계하라</h3> <h3 id="_22-인터페이스는-타입을-정의하는-용도로만-사용하라"><a href="#_22-인터페이스는-타입을-정의하는-용도로만-사용하라" class="header-anchor">#</a> 22. 인터페이스는 타입을 정의하는 용도로만 사용하라</h3> <ul><li>상수를 모아놓는 용도로 사용하지 않는다.</li></ul> <h3 id="_23-태그-달린-클래스보다는-클래스-계층구조를-활용하라"><a href="#_23-태그-달린-클래스보다는-클래스-계층구조를-활용하라" class="header-anchor">#</a> 23. 태그 달린 클래스보다는 클래스 계층구조를 활용하라</h3> <h3 id="_24-멤버-클래스는-되도록-static으로-만들라"><a href="#_24-멤버-클래스는-되도록-static으로-만들라" class="header-anchor">#</a> 24. 멤버 클래스는 되도록 static으로 만들라</h3> <h3 id="_25-톱레벨-클래스는-한-파일에-하나만-담으라"><a href="#_25-톱레벨-클래스는-한-파일에-하나만-담으라" class="header-anchor">#</a> 25. 톱레벨 클래스는 한 파일에 하나만 담으라</h3></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/effective-java-study/assets/js/app.34abd0d4.js" defer></script><script src="/effective-java-study/assets/js/2.28ccdcca.js" defer></script><script src="/effective-java-study/assets/js/8.443cd7ba.js" defer></script>
  </body>
</html>
